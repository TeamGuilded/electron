From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Alex Ciarlillo <alex.ciarlillo@gmail.com>
Date: Tue, 30 Jan 2024 15:35:28 -0500
Subject: enable nvidia cbp h264 encoding

Guilded Patch: Skip faulty check which disables CBP H264 HW encoding for
_all_ NVIDIA GPUs

diff --git a/media/gpu/windows/media_foundation_video_encode_accelerator_win.cc b/media/gpu/windows/media_foundation_video_encode_accelerator_win.cc
index bc694f20a31b0698ed8e98a493af5d160cb49f24..e6ada48d91e8fcc7756d61a6ab001198b95576f0 100644
--- a/media/gpu/windows/media_foundation_video_encode_accelerator_win.cc
+++ b/media/gpu/windows/media_foundation_video_encode_accelerator_win.cc
@@ -1374,6 +1374,10 @@ bool MediaFoundationVideoEncodeAccelerator::ActivateAsyncEncoder(
       continue;
     }
 
+    // Guilded Patch: Skip this check as it disables HW Encoding for ALL NVIDIA GPUs
+    // not just specific SKUs and it also appears that this issue has already been
+    // resolved.
+    /*
     // Skip NVIDIA GPU due to https://crbug.com/1088650 for constrained
     // baseline profile H.264 encoding, and go to the next instance according
     // to merit value.
@@ -1382,6 +1386,7 @@ bool MediaFoundationVideoEncodeAccelerator::ActivateAsyncEncoder(
       DLOG(WARNING) << "Skipped NVIDIA GPU due to https://crbug.com/1088650";
       continue;
     }
+    */
 
     if (num_temporal_layers_ > GetMaxTemporalLayerVendorLimit(vendor, codec_)) {
       DLOG(WARNING) << "Skipped GPUs due to not support temporal layer";
